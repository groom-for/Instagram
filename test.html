<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Instagram – Clone Mock</title>
  <link rel="stylesheet" href="styles/style.css" />
  <!-- 아이콘 (Bootstrap Icons) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
</head>
<body>
  <div class="app">

    <!-- 좌측 사이드바 -->
    <aside class="sidebar">
      <div class="logo"><img src="assets/icon/logo.svg"></div>
      <nav class="nav">
        <a class="nav__item is-active" href="#" aria-label="홈"><i class="bi bi-house-door-fill"></i><span>홈</span></a>
        <a class="nav__item" href="#"><i class="bi bi-search"></i><span>검색</span></a>
        <a class="nav__item" href="#"><i class="bi bi-collection-play"></i><span>릴스</span></a>
        <a class="nav__item" href="#"><i class="bi bi-send"></i><span>메시지</span></a>
        <a class="nav__item" href="#"><i class="bi bi-heart"></i><span>알림</span></a>
        <a class="nav__item" href="#"><i class="bi bi-plus-square"></i><span>만들기</span></a>
        <a class="nav__item" href="#"><i class="bi bi-person-circle"></i><span>프로필</span></a>
      </nav>
      <div class="more">
        <a class="nav__item more__button" href="#"><i class="bi bi-list"></i><span>더 보기</span></a>
           <!-- 더보기 클릭시 -->
       <div class="more__action">
          <div class="more__options"><img src="assets/icon/edit.svg"><span>설정</span></div>
          <div class="more__options"><img src="assets/icon/active.svg"><span>내 활동</span></div>
          <div class="more__options"><img src="assets/icon/save.svg"><span>저장됨</span></div>
          <div class="more__options"><img src="assets/icon/mode.svg"><span>모드 전환</span></div>
          <div class="more__options"><img src="assets/icon/report.svg"><span>문제 신고</span></div>
          <div class="more__options_line1"></div>
          <div class="more__options"><span>계정 전환</span></div>
          <div class="more__options_line2"></div>
          <div class="more__options"><span>로그아웃</span></div>
       </div>
        

        <a class="nav__item meta__button" href="#"><img src="assets/icon/meta.svg"><span>Meta의 다른 앱</span></a>

         <div class="meta__action">
          <div class="meta__options"><img src="assets/icon/threads.svg"><span>Threads</span></div>
          <div class="meta__options"><img src="assets/icon/whatsapp.svg"><span>WhatsApp</span></div>
       </div>
      </div>
     
     

    </aside>

    <div class="main__wrapper">
    <!-- 중앙 메인영역 -->
    <main class="main">
      <!-- 스토리 바 -->
      <section class="storybar" aria-label="스토리">
        <button class="story">
          <img src="https://picsum.photos/seed/u1/120" alt="da.moamall 스토리">
          <span>da.moamall</span>
        </button>
        <button class="story">
          <img src="https://picsum.photos/seed/u2/120" alt="linamond 스토리">
          <span>linamond…</span>
        </button>
        <button class="story">
          <img src="https://picsum.photos/seed/u3/120" alt="kaistbz 스토리">
          <span>kaistbz</span>
        </button>
        <button class="story">
          <img src="https://picsum.photos/seed/u4/120" alt="rengate 스토리">
          <span>rengate…</span>
        </button>
        <button class="story">
          <img src="https://picsum.photos/seed/u5/120" alt="onthebat 스토리">
          <span>onthebat…</span>
        </button>
        <button class="story">
          <img src="https://picsum.photos/seed/u6/120" alt="jogyurim 스토리">
          <span>jogyurim</span>
        </button>
      </section>

      <section class="post__wrap">
      <!-- 게시글 카드 -->
      <article class="post">
        <header class="post__head">
          <div class="avatar"><img src="./assets/images/user03.jpg" alt=""></div>
          <div class="meta">
            <strong>8bitdo</strong>
            <span class="time">• 12시간</span>
          </div>
          <button class="icon-btn" aria-label="더보기"><i class="bi bi-three-dots"></i></button>
        </header>

        <!-- 본문 이미지(1:1) -->
        <img class="post__media" src="https://picsum.photos/seed/gamepad/1080" alt="게임패드 사진" loading="lazy">

        <!-- 액션 -->
        <div class="post__actions">
          <div class="left">
            <button class="icon-btn" aria-label="좋아요"><i class="bi bi-heart"></i></button>
            <button class="icon-btn" aria-label="댓글"><i class="bi bi-chat"></i></button>
            <button class="icon-btn" aria-label="공유"><i class="bi bi-send"></i></button>
          </div>
          <div class="action_right">
            <button class="icon-btn" aria-label="저장"><i class="bi bi-bookmark"></i></button>
          </div>
        </div>

        <!-- 좋아요/본문/댓글 -->
        <div class="post__body">
          <div class="likes"><strong>좋아요 12,517개</strong></div>
          <div class="caption">
            <div class="caption-text"><strong>8bitdo</strong> Get ready, the 8BitDo Pro 3 Bluetooth Gamepad will be officially in stock and available on Aug 12th…</div>
            <button class="moreless" style="display: none;">더 보기</button>
          </div>
          <button class="comments">댓글 23개 모두 보기</button>
          <div class="add-comment">댓글 달기…</div>
        </div>
      </article>
      </section>

      <!-- 로딩바 -->
      <div class="loading_spinner" style="display: none;">
        <img src="assets/images/loading_spinner.gif" alt="Loading..." />
      </div>
      <div class="end"></div>

    </main>

    <!-- 우측 추천 패널 -->
    <aside class="right">
      <div class="account">
        <img src="https://picsum.photos/seed/me/48" alt="">
        <div class="who">
          <strong>ibrandart</strong>
          <span class="muted">릴리 우리</span>
        </div>
        <a class="switch" href="#">전환</a>
      </div>

      <div class="suggest">
        <div class="title">
          <span class="muted">회원님을 위한 추천</span>
          <a href="#" class="seeall">모두 보기</a>
        </div>

        <ul class="suggest__list">
          <li class="user">
            <img src="https://picsum.photos/seed/s1/40" alt="">
            <div>
              <strong>_2comma</strong>
              <span class="muted">morning 외 1명이 팔로…</span>
            </div>
            <button class="follow">팔로우</button>
          </li>
          <li class="user">
            <img src="https://picsum.photos/seed/s2/40" alt="">
            <div>
              <strong>haily_furniture</strong>
              <span class="muted">회원님을 위한 추천</span>
            </div>
            <button class="follow">팔로우</button>
          </li>
          <li class="user">
            <img src="https://picsum.photos/seed/s3/40" alt="">
            <div>
              <strong>hongz.ia</strong>
              <span class="muted">팔로우합니다</span>
            </div>
            <button class="follow">팔로우</button>
          </li>
        </ul>
      </div>
      <footer class="foot muted">
        <a href="#">소개</a> · <a href="#">도움말</a> · <a href="#">홍보 센터</a> · <a href="#">API</a> · <a href="#">채용 정보</a><br>
        <a href="#">개인정보처리방침</a> · <a href="#">약관</a> · <a href="#">위치</a> · <a href="#">언어</a><br><br>
        <span>© 2025 INSTAGRAM FROM META</span>
      </footer>
      </div>

      
    </aside>

     <footer class="footer">
      <div class="footer_top">
        <a href="#">Meta</a><a href="#">소개</a><a href="#">블로그</a><a href="#">채용 정보</a><a href="#">도움말</a><a href="#">API</a>  
        <a href="#">개인정보처리방침</a><a href="#">약관</a><a href="#">위치</a><a href="#">Instagram Lite</a> <a href="#">Meta AI</a>
        <a href="#">Meta AI Ariclea</a><a href="#">연락처 업로드 & 비사용자</a><a href="#">Meta Verified</a>
      </div>
      <div class="footer_bottom">
        <a href="#">한국어</a> <span>© 2025 Instamram From Meta</span>
      </div>        
      </footer>
  </div>
  

  <script>
  // 더 보기 버튼 표시 여부 결정 함수
  function toggleMoreButton(captionElement) {
    const moreButton = captionElement.querySelector('.moreless');
    const captionText = captionElement.querySelector('.caption-text');
    
    if (moreButton && captionText) {
      // 텍스트가 한 줄을 넘어가는지 확인
      const lineHeight = parseInt(window.getComputedStyle(captionText).lineHeight);
      const textHeight = captionText.scrollHeight;
      
      if (textHeight > lineHeight * 1.5) { // 한 줄보다 높으면
        moreButton.style.display = 'inline';
        // 더 보기 클릭 이벤트 추가
        moreButton.onclick = function() {
          const caption = this.closest('.caption');
          if (caption.classList.contains('expanded')) {
            caption.classList.remove('expanded');
            this.textContent = '더 보기';
          } else {
            caption.classList.add('expanded');
            this.textContent = '접기';
          }
        };
      } else {
        moreButton.style.display = 'none';
      }
    }
  }

  // 페이지 로드 시 기존 게시글의 더 보기 버튼 처리
  document.addEventListener('DOMContentLoaded', function() {
    const captions = document.querySelectorAll('.caption');
    captions.forEach(caption => {
      toggleMoreButton(caption);
    });
  });

  const count = 3;
  let itemIndex = 0;

  const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {

      // 로딩 스피너
      document.querySelector('.loading_spinner').style.display = 'block';

      setTimeout(() => {
        for (let i = itemIndex; i < itemIndex + count; i++) {

          const posts = [
            {
              username: "sonagi",
              avatar: "./assets/images/user01.webp",
              postImage: "https://picsum.photos/seed/gamepad/1080",
              time: "• 7시간",
              likes: "6,121",
              caption: "Get ready, the 8BitDo Pro 3 Bluetooth Gamepad will be officially in stock and available on Aug 12th… ",
              comments: "12"
            },
            {
              username: "01lulu",
              avatar: "https://picsum.photos/seed/c1/64",
              postImage: "https://picsum.photos/seed/skin/1080",
              time: "• 2시간",
              likes: "95",
              caption: "… ",
              comments: "2"
            }
          ];

          const articles = document.querySelector('.post__wrap');

          posts.forEach(post => {
            const div = document.createElement('div');
            div.innerHTML =
              `<article class="post">
                <header class="post__head">
                  <div class="avatar"><img src=${post.avatar} alt=""></div>
                  <div class="meta">
                    <strong>${post.username}</strong>
                    <span class="time">${post.time}</span>
                  </div>
                  <button class="icon-btn" aria-label="더보기"><i class="bi bi-three-dots"></i></button>
                </header>

                <img class="post__media" src=${post.postImage} alt="게임패드 사진" loading="lazy">

                <div class="post__actions">
                  <div class="left">
                    <button class="icon-btn" aria-label="좋아요"><i class="bi bi-heart"></i></button>
                    <button class="icon-btn" aria-label="댓글"><i class="bi bi-chat"></i></button>
                    <button class="icon-btn" aria-label="공유"><i class="bi bi-send"></i></button>
                  </div>
                  <div class="action_right">
                    <button class="icon-btn" aria-label="저장"><i class="bi bi-bookmark"></i></button>
                  </div>
                </div>

                <div class="post__body">
                  <div class="likes"><strong>좋아요 ${post.likes}개</strong></div>
                  <div class="caption">
                    <div class="caption-text"><strong>${post.username}</strong> ${post.caption}</div>
                    <button class="moreless" style="display: none;">더 보기</button>
                  </div>
                  <button class="comments">댓글 ${post.comments}개 모두 보기</button>
                  <div class="add-comment">댓글 달기…</div>
                </div>
              </article>`;
            articles.appendChild(div);
          });
        }

        itemIndex += count;
        document.querySelector('.loading_spinner').style.display = 'none';

        // 새로 생성된 게시글의 더 보기 버튼 처리
        const newCaptions = document.querySelectorAll('.caption');
        newCaptions.forEach(caption => {
          toggleMoreButton(caption);
        });

      }, 2500); // 로딩 시간
    }
  });
}, { root: null });

observer.observe(document.querySelector('.end'));

const more_button = document.querySelector('.more__button');
const more_action = document.querySelector('.more__action');

const meta_button = document.querySelector('.meta__button');
const meta_action = document.querySelector('.meta__action');

more_button.addEventListener("click", (e) => {
  e.preventDefault();
  e.stopPropagation();
  meta_action.classList.remove("active");
  more_action.classList.toggle("active");  
});

meta_button.addEventListener("click", (e) => {
  e.preventDefault();
  e.stopPropagation();
  more_action.classList.remove("active");
  meta_action.classList.toggle("active");  
});

window.addEventListener("click", () => {
  more_action.classList.remove("active");
  meta_action.classList.remove("active");
});

more_action.addEventListener("click", (e) => {
  e.stopPropagation();  
});

meta_action.addEventListener("click", (e) => {
  e.stopPropagation();  
});




  </script>
</body>
</html>
